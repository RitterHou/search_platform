<p></p>
<accordion close-others="false">
    <accordion-group is-open="true" ng-repeat="host in hosts">
        <accordion-heading>主机: <strong class="text-danger"
                                       id="id_hostname_{{ host.host }}">{{ host.host }}</strong></accordion-heading>
        <div class="form-group ">
            <ul class="list-inline" id="id_selected_condition_list">
                <li><label class="control-label"
                           id="id_main_process_state_{{ host.host }}">主进程状态：{{ host.state }}</label>
                </li>
                <li><label class="control-label"
                           id="id_main_process_id_{{ host.host }}">主进程ID：{{ host.pid }}</label></li>
            </ul>
        </div>
        <div class="form-group ">
            <ul class="list-inline" id="id_selected_condition_list">
                <li><a class="btn btn-danger btn-sm" ng-click="doAction( host.host , 'restart')">重启所有应用</a>
                </li>
                <li><a class="btn btn-danger btn-sm" ng-click="doAction(host.host, 'stop')">停止所有应用</a>
                </li>
                <li><a class="btn btn-primary btn-sm" target="_blank"
                       href="/manage/process/viewlog?host={{ host.host }}">查看日志</a>
                </li>
                <li><a class="btn btn-primary btn-sm"
                       ng-click="doAction(host.host, 'clear_log')">清空日志</a></li>
            </ul>
        </div>
        <div class="form-group ">
            <table class="table table-responsive table-striped table-condensed">
                <thead>
                <tr>
                    <th>应用名</th>
                    <th>状态</th>
                    <th>描述</th>
                    <th>操作</th>
                </tr>
                </thead>
                <tbody id="id_sub_process_list_{{ host.host }}">
                <tr data-type="selected_condition" ng-repeat="process in host.sub_process_list">
                    <th>{{ process.group }}</th>
                    <th>{{ process.statename }}</th>
                    <th>{{ process.description }}</th>
                    <th>
                        <ul class="list-inline" id="id_selected_condition_list">
                            <li><a class="text-danger" href="javascript:void(0)"
                                   ng-click="doAction(host.host , 'restart', process.group )">重启</a>
                            </li>
                            <li><a class="text-danger" href="javascript:void(0)"
                                   ng-click="doAction(host.host, 'stop', process.group)">停止</a>
                            </li>
                            <li><a class="" target="_blank"
                                   href="/manage/process/viewlog?host={{ host.host }}&process={{ process.group }}">查看日志</a>
                            </li>
                            <li><a class="" href="javascript:void(0)"
                                   ng-click="doAction( host.host, 'clear_log', process.group)">清空日志</a>
                            </li>
                        </ul>
                    </th>
                </tr>
                </tbody>
            </table>
        </div>
    </accordion-group>
</accordion>