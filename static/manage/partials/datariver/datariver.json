[
    {
        "name": "yun_not_edit",
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "topic": "t.qmpc.ItemChange",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "(\"type\":\"add\"[\\d\\D]*\"sys\":2)|(\"sys\":2[\\d\\D]*\"type\":\"add\")|(\"update\":\"add\"[\\d\\D]*\"sys\":2)|(\"sys\":2[\\d\\D]*\"type\":\"update\")"
                    },
                    {
                        "operator": "not",
                        "type": "regex",
                        "expression": "\"operation\":\"edit\""
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {
                    "adminID": "chainMasterId\":\"(?P<adminID>[\\d\\D]+?)\"",
                    "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\""
                }
            }
        },
        "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "172.19.66.49:2181",
            "service_interface": "com.qianmi.pc.api.es.item.EsGoodsQueryProvider",
            "request": {
                "method": "listByIdString",
                "timeout": 10,
                "body": {
                    "chainMasterId": "{adminID}",
                    "idString": "{ids}"
                }
            }
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "reference": "product",
                "operation": "create",
                "index": "search_platform-{adminId}-{version}",
                "id": "{skuId}"
            }
        ]
    },
    {
        "name": "yun_edit_add",
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "topic": "t.qmpc.ItemChange",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "(\"type\":\"add\"[\\d\\D]*\"sys\":2)|(\"sys\":2[\\d\\D]*\"type\":\"add\")|(\"update\":\"add\"[\\d\\D]*\"sys\":2)|(\"sys\":2[\\d\\D]*\"type\":\"update\")"
                    },
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "\"operation\":\"edit\""
                    },
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "\"addSkuIds\":\""
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {
                    "adminID": "chainMasterId\":\"(?P<adminID>[\\d\\D]+?)\"",
                    "ids": "\"addSkuIds\":\"(?P<ids>[\\d\\D]+?)\""
                }
            }
        },
        "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "172.19.66.49:2181",
            "service_interface": "com.qianmi.pc.api.es.item.EsGoodsQueryProvider",
            "version": "1.0.0",
            "request": {
                "method": "listByIdString",
                "timeout": 10,
                "body": {
                    "chainMasterId": "{adminID}",
                    "idString": "{ids}"
                }
            }
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "reference": "product",
                "operation": "create",
                "index": "search_platform-{adminId}-{version}",
                "id": "{skuId}"
            }
        ]
    },
    {
        "name": "yun_edit_update",
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "topic": "t.qmpc.ItemChange",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "(\"type\":\"add\"[\\d\\D]*\"sys\":2)|(\"sys\":2[\\d\\D]*\"type\":\"add\")|(\"update\":\"add\"[\\d\\D]*\"sys\":2)|(\"sys\":2[\\d\\D]*\"type\":\"update\")"
                    },
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "\"operation\":\"edit\""
                    },
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "\"updateSkuIds\":\""
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {
                    "adminID": "chainMasterId\":\"(?P<adminID>[\\d\\D]+?)\"",
                    "ids": "\"updateSkuIds\":\"(?P<ids>[\\d\\D]+?)\""
                }
            }
        },
        "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "172.19.66.49:2181",
            "service_interface": "com.qianmi.pc.api.es.item.EsGoodsQueryProvider",
            "version": "1.0.0",
            "request": {
                "method": "listByIdString",
                "timeout": 10,
                "body": {
                    "chainMasterId": "{adminID}",
                    "idString": "{ids}"
                }
            }
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "reference": "product",
                "operation": "create",
                "index": "search_platform-{adminId}-{version}",
                "id": "{skuId}"
            }
        ]
    },
    {
        "name": "yun_edit_delete",
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "topic": "t.qmpc.ItemChange",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "\"deleteSkuIds\":\""
                    },
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "\"sys\":2"
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {
                    "adminID": "chainMasterId\":\"(?P<adminID>[\\d\\D]+?)\"",
                    "ids": "\"deleteSkuIds\":\"(?P<ids>[\\d\\D]+?)\""
                }
            }
        },
        "source": {
            "type": "passthrough",
            "fields_reference": "fields"
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "reference": "product",
                "operation": "delete",
                "index": "search_platform-{adminID}-{version}",
                "id": "{ids}",
                "id_process": {
                    "type": "seperate",
                    "separator": ":"
                }
            }
        ]
    },
    {
        "name": "yun_init",
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "queue": "q.qmpc.EsInit",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "\"sys\":2"
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {
                    "adminID": "chainMasterId\":\"(?P<adminID>[\\d\\D]+?)\"",
                    "fromSys": "sys\":(?P<fromSys>[\\d]+?)"
                }
            }
        },
        "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "172.19.66.49:2181",
            "service_interface": "com.qianmi.pc.api.es.item.EsGoodsQueryProvider",
            "version": "1.0.0",
            "request": {
                "method": "query",
                "timeout": 10,
                "body": {
                    "chainMasterId": "{adminID}",
                    "pageNum": "{page_from}",
                    "pageSize": "{page_size}",
                    "fromSys": "{fromSys}"
                }
            },
            "response": {
                "fields": {
                    "total": "totalCount",
                    "data": "dataList"
                }
            }
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "reference": "product",
                "operation": "create",
                "index": "search_platform-{adminId}-{version}",
                "id": "{skuId}",
                "clear_policy": "every_msg,all"
            }
        ]
    },
    {
        "name": "sup_init",
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "topic": "VirtualTopic.gavin.category.operate",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "type": "regex",
                        "expression": "method=init"
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {}
            }
        },
        "source": {
            "type": "iterator_get",
            "protocol": "http",
            "host": "172.19.6.33:8080",
            "request": {
                "url": "/supGoods/getSupGoodsInfoPagination",
                "http_method": "POST",
                "body": {
                    "version": "{version}",
                    "pageNum": "{page_from}",
                    "pageSize": "{page_size}"
                }
            },
            "response": {
                "fields": {
                    "total": "totalCount",
                    "data": "dataList"
                }
            }
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "reference": "gonghuo_product",
                "operation": "create",
                "id": "{skuId}",
                "clear_policy": "every_msg,all"
            }
        ]
    },
    {
        "name": "sup_show_cate_update",
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "topic": "VirtualTopic.gavin.category.operate",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "type": "regex",
                        "expression": "method=update"
                    },
                    {
                        "type": "regex",
                        "expression": "oldCateId="
                    },
                    {
                        "type": "regex",
                        "expression": "cateId="
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {
                    "oldCateId": "oldCateId=(?P<oldCateId>[\\d\\D]+?),",
                    "cateId": "cateId=(?P<cateId>[\\d\\D]+?)}"
                }
            }
        },
        "source": {
            "type": "iterator_get",
            "protocol": "http",
            "host": "172.19.6.33:8080",
            "request": {
                "url": "/supGoods/getSupGoodsInfoByCatIdsPagination",
                "http_method": "POST",
                "body": {
                    "version": "{version}",
                    "pageNum": "{page_from}",
                    "pageSize": "{page_size}",
                    "oldCateId": "{oldCateId}",
                    "cateId": "{cateId}"
                }
            },
            "response": {
                "fields": {
                    "total": "totalCount",
                    "data": "dataList"
                }
            }
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "reference": "gonghuo_product",
                "operation": "update",
                "id": "{skuId}"
            }
        ]
    },
    {
        "name": "sup_show_cate_delete",
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "topic": "VirtualTopic.gavin.category.operate",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "type": "regex",
                        "expression": "method=delete"
                    },
                    {
                        "type": "regex",
                        "expression": "cateId="
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {
                    "cateId": "cateId=(?P<cateId>[\\d\\D]+?)}"
                }
            }
        },
        "source": {
            "type": "iterator_get",
            "protocol": "http",
            "host": "172.19.6.33:8080",
            "request": {
                "url": "/supGoods/getSupGoodsInfoByCatIdsPagination",
                "http_method": "POST",
                "body": {
                    "version": "{version}",
                    "pageNum": "{page_from}",
                    "pageSize": "{page_size}",
                    "cateId": "{cateId}"
                }
            },
            "response": {
                "fields": {
                    "total": "totalCount",
                    "data": "dataList"
                }
            }
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "reference": "gonghuo_product",
                "operation": "update",
                "id": "{skuId}"
            }
        ]
    },
    {
        "name": "sup_show_cate_add",
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "topic": "VirtualTopic.gavin.category.operate",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "type": "regex",
                        "expression": "method=add"
                    },
                    {
                        "type": "regex",
                        "expression": "cateId="
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {
                    "cateId": "cateId=(?P<cateId>[\\d\\D]+?)}"
                }
            }
        },
        "source": {
            "type": "iterator_get",
            "protocol": "http",
            "host": "172.19.6.33:8080",
            "request": {
                "url": "/supGoods/getSupGoodsInfoByCatIdsPagination",
                "http_method": "POST",
                "body": {
                    "version": "{version}",
                    "pageNum": "{page_from}",
                    "pageSize": "{page_size}",
                    "cateId": "{cateId}"
                }
            },
            "response": {
                "fields": {
                    "total": "totalCount",
                    "data": "dataList"
                }
            }
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "reference": "gonghuo_product",
                "operation": "update",
                "id": "{skuId}"
            }
        ]
    },
    {
        "name": "sup_cate_update",
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "topic": "VirtualTopic.gavin.category.operate",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "type": "regex",
                        "expression": "method=update"
                    },
                    {
                        "type": "regex",
                        "expression": "oldCateId="
                    },
                    {
                        "type": "regex",
                        "expression": "cateId="
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {
                    "oldCateId": "oldCateId=(?P<oldCateId>[\\d\\D]+?),",
                    "cateId": "cateId=(?P<cateId>[\\d\\D]+?)}"
                }
            }
        },
        "source": {
            "type": "iterator_get",
            "protocol": "http",
            "host": "172.19.6.33:8080",
            "request": {
                "url": "/supGoods/getSupGoodsInfoByCatIdsPagination",
                "http_method": "POST",
                "body": {
                    "version": "{version}",
                    "pageNum": "{page_from}",
                    "pageSize": "{page_size}",
                    "oldCateId": "{oldCateId}",
                    "cateId": "{cateId}"
                }
            },
            "response": {
                "fields": {
                    "total": "totalCount",
                    "data": "dataList"
                }
            }
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "reference": "gonghuo_product",
                "operation": "update",
                "id": "{skuId}"
            }
        ]
    },
    {
        "name": "sup_not_edit",
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "topic": "t.qmpc.ItemChange",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "(\"type\":\"add\"[\\d\\D]*\"sys\":1)|(\"sys\":1[\\d\\D]*\"type\":\"add\")|(\"update\":\"add\"[\\d\\D]*\"sys\":1)|(\"sys\":1[\\d\\D]*\"type\":\"update\")"
                    },
                    {
                        "operator": "not",
                        "type": "regex",
                        "expression": "\"operation\":\"edit\""
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {
                    "adminID": "chainMasterId\":\"(?P<adminID>[\\d\\D]+?)\"",
                    "skuIds": {
                        "type": "script",
                        "language": "python",
                        "obj_path": "script_data_parsers.parse_skuids_from_pc_mq_msg",
                        "input_param": {
                            "fields": {
                                "pc_ids": {
                                    "type": "regex",
                                    "expression": "\"ids\":\"(?P<pc_ids>[\\d\\D]+?)\""
                                },
                                "sep_char": {
                                    "type": "fixed",
                                    "expression": ","
                                }
                            }
                        }
                    }
                }
            }
        },
        "source": {
            "type": "get",
            "protocol": "http",
            "host": "172.19.6.33:8080",
            "request": {
                "url": "/supGoods/getSupGoodsInfoList",
                "http_method": "POST",
                "body": {
                    "version": "{version}",
                    "skuIds": "{skuIds}",
                    "adminId": "{adminID}"
                }
            },
            "response": {
                "fields": {
                    "total": "totalCount",
                    "data": "dataList"
                }
            }
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "reference": "gonghuo_product",
                "operation": "create",
                "id": "{skuId}"
            }
        ]
    },
    {
        "name": "sup_edit_add",
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "topic": "t.qmpc.ItemChange",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "(\"type\":\"add\"[\\d\\D]*\"sys\":1)|(\"sys\":1[\\d\\D]*\"type\":\"add\")|(\"update\":\"add\"[\\d\\D]*\"sys\":1)|(\"sys\":1[\\d\\D]*\"type\":\"update\")"
                    },
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "\"operation\":\"edit\""
                    },
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "\"addSkuIds\":\""
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {
                    "adminID": "chainMasterId\":\"(?P<adminID>[\\d\\D]+?)\"",
                    "ids": "\"addSkuIds\":\"(?P<ids>[\\d\\D]+?)\"",
                    "skuIds": {
                        "type": "script",
                        "language": "python",
                        "obj_path": "script_data_parsers.parse_skuids_from_pc_mq_msg",
                        "input_param": {
                            "fields": {
                                "pc_ids": {
                                    "type": "regex",
                                    "expression": "\"addSkuIds\":\"(?P<pc_ids>[\\d\\D]+?)\""
                                },
                                "sep_char": {
                                    "type": "fixed",
                                    "expression": ","
                                }
                            }
                        }
                    }
                }
            }
        },
        "source": {
            "type": "get",
            "protocol": "http",
            "host": "172.19.6.33:8080",
            "request": {
                "url": "/supGoods/getSupGoodsInfoList",
                "http_method": "POST",
                "body": {
                    "version": "{version}",
                    "skuIds": "{skuIds}",
                    "adminId": "{adminID}"
                }
            },
            "response": {
                "fields": {
                    "total": "totalCount",
                    "data": "dataList"
                }
            }
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "reference": "gonghuo_product",
                "operation": "create",
                "id": "{skuId}"
            }
        ]
    },
    {
        "name": "sup_edit_update",
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "topic": "t.qmpc.ItemChange",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "(\"type\":\"add\"[\\d\\D]*\"sys\":1)|(\"sys\":1[\\d\\D]*\"type\":\"add\")|(\"update\":\"add\"[\\d\\D]*\"sys\":1)|(\"sys\":1[\\d\\D]*\"type\":\"update\")"
                    },
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "\"operation\":\"edit\""
                    },
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "\"updateSkuIds\":\""
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {
                    "adminID": "chainMasterId\":\"(?P<adminID>[\\d\\D]+?)\"",
                    "ids": "\"updateSkuIds\":\"(?P<ids>[\\d\\D]+?)\"",
                    "skuIds": {
                        "type": "script",
                        "language": "python",
                        "obj_path": "script_data_parsers.parse_skuids_from_pc_mq_msg",
                        "input_param": {
                            "fields": {
                                "pc_ids": {
                                    "type": "regex",
                                    "expression": "\"updateSkuIds\":\"(?P<skuIds>[\\d\\D]+?)\""
                                },
                                "sep_char": {
                                    "type": "fixed",
                                    "expression": ","
                                }
                            }
                        }
                    }
                }
            }
        },
        "source": {
            "type": "get",
            "protocol": "http",
            "host": "172.19.6.33:8080",
            "request": {
                "url": "/supGoods/getSupGoodsInfoList",
                "http_method": "POST",
                "body": {
                    "version": "{version}",
                    "skuIds": "{skuIds}",
                    "adminId": "{adminID}"
                }
            },
            "response": {
                "fields": {
                    "total": "totalCount",
                    "data": "dataList"
                }
            }
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "reference": "gonghuo_product",
                "operation": "create",
                "id": "{skuId}"
            }
        ]
    },
    {
        "name": "sup_edit_delete",
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "topic": "t.qmpc.ItemChange",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "\"deleteSkuIds\":\""
                    },
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "\"sys\":1"
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {
                    "adminID": "chainMasterId\":\"(?P<adminID>[\\d\\D]+?)\"",
                    "ids": "\"deleteSkuIds\":\"(?P<ids>[\\d\\D]+?)\""
                }
            }
        },
        "source": {
            "type": "passthrough",
            "fields_reference": "fields"
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "reference": "gonghuo_product",
                "operation": "delete",
                "id": "{ids}"
            }
        ]
    },
    {
        "name": "sup_standard_cate_update",
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "topic": "t.qmpc.standardCateChange",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "\"type\": \"update\"|\"type\": \"updateStatus\""
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {
                    "type": "\"type\":\"(?P<type>[\\d\\D]+?)\"",
                    "parentCateId": "parentCateId\":\"(?P<parentCateId>[\\d\\D]+?)\"",
                    "cateId": {
                        "type": "script",
                        "language": "python",
                        "obj_path": "script_data_parsers.parse_cateIds_from_standard_cate_update_msg"
                    }
                }
            }
        },
        "source": {
            "type": "iterator_get",
            "protocol": "http",
            "host": "172.19.6.33:8080",
            "request": {
                "url": "/supGoods/getSupGoodsInfoByCatIdsPagination",
                "http_method": "POST",
                "body": {
                    "version": "{version}",
                    "pageNum": "{page_from}",
                    "pageSize": "{page_size}",
                    "type": "{type}",
                    "cateId": "{cateId}",
                    "parentCateId": "{parentCateId}"
                }
            },
            "response": {
                "fields": {
                    "total": "totalCount",
                    "data": "dataList"
                }
            }
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "reference": "gonghuo_product",
                "operation": "update",
                "id": "{skuId}"
            }
        ]
    },
    {
        "name": "sup_standard_cate_delete",
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "topic": "t.qmpc.standardCateChange",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "\"type\": \"delete\""
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {
                    "type": "\"type\":\"(?P<type>[\\d\\D]+?)\"",
                    "parentCateId": "parentCateId\":\"(?P<parentCateId>[\\d\\D]+?)\"",
                    "cateId": {
                        "type": "script",
                        "language": "python",
                        "obj_path": "script_data_parsers.parse_cateIds_from_standard_cate_update_msg"
                    }
                }
            }
        },
        "source": {
            "type": "iterator_get",
            "protocol": "http",
            "host": "172.19.6.33:8080",
            "request": {
                "url": "/supGoods/getSupGoodsInfoByCatIdsPagination",
                "http_method": "POST",
                "body": {
                    "version": "{version}",
                    "pageNum": "{page_from}",
                    "pageSize": "{page_size}",
                    "type": "{type}",
                    "cateId": "{cateId}",
                    "parentCateId": "{parentCateId}"
                }
            },
            "response": {
                "fields": {
                    "total": "totalCount",
                    "data": "dataList"
                }
            }
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "reference": "gonghuo_product",
                "operation": "update",
                "id": "{skuId}"
            }
        ]
    },
    {
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "topic": "search_test",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "type": "regex",
                        "expression": "msg_type=update"
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {
                    "adminID": "adminID=(?P<adminID>[\\d\\D]+?);",
                    "ids": "ids=(?P<ids>[\\d\\D]+?);"
                },
                "fields_update": {
                    "adminID": "adminID=(?P<adminID>[\\d\\D]+?);",
                    "ids": "ids=(?P<ids>[\\d\\D]+?);",
                    "add_field": "add_field=(?P<add_field>[\\d\\D]+?);"
                }
            }
        },
        "source": {
            "type": "passthrough",
            "fields_reference": "fields_update"
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "reference": "product",
                "operation": "update",
                "id": "{ids}"
            }
        ]
    },
    {
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "topic": "search_test",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "type": "regex",
                        "expression": "msg_type=delete"
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {
                    "adminID": "adminID=(?P<adminID>[\\d\\D]+?);",
                    "ids": "ids=(?P<ids>[\\d\\D]+?);"
                },
                "fields_update": {
                    "adminID": "adminID=(?P<adminID>[\\d\\D]+?);",
                    "ids": "ids=(?P<ids>[\\d\\D]+?);",
                    "add_field": "add_field=(?P<add_field>[\\d\\D]+?);"
                }
            }
        },
        "source": {
            "type": "passthrough",
            "fields_reference": "fields_update"
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "reference": "product",
                "operation": "delete",
                "id": "{ids}"
            }
        ]
    },
    {
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "topic": "search_test",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "type": "regex",
                        "expression": "msg_type=init"
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {
                    "adminID": "adminID=(?P<adminID>[\\d\\D]+?);",
                    "ids": "ids=(?P<ids>[\\d\\D]+?);"
                }
            }
        },
        "source": {
            "type": "iterator_get",
            "protocol": "http",
            "host": "127.0.0.1:8000",
            "request": {
                "url": "/test/products/{adminID}/{version}",
                "http_method": "POST",
                "body": {
                    "adminID": "{adminID}",
                    "version": "{version}",
                    "ids": "{ids}",
                    "from": "{from}",
                    "size": "{size}"
                }
            },
            "response": {
                "fields": {
                    "total": "totalCount",
                    "data": "dataList"
                }
            }
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "operation": "create",
                "reference": "product",
                "clear_policy": "every_msg,all"
            }
        ]
    },
    {
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "topic": "search_test",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "msg_type=add"
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {
                    "adminID": "adminID=(?P<adminID>[\\d\\D]+?);",
                    "ids": "ids=(?P<ids>[\\d\\D]+?);"
                }
            }
        },
        "source": {
            "type": "get",
            "protocol": "http",
            "host": "127.0.0.1:8000",
            "request": {
                "url": "/test/products/{adminID}/{version}/{ids}/",
                "http_method": "POST",
                "timeout": 10,
                "body": {
                    "adminID": "{adminID}",
                    "version": "{version}",
                    "ids": "{ids}"
                }
            }
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "reference": "product",
                "operation": "create"
            },
            {
                "destination_type": "elasticsearch",
                "operation": "create",
                "host": "http://172.19.65.66:9200",
                "index": "qmshoptest2-{adminID}-{version}",
                "type": "Product",
                "id": "{id}",
                "mapping": {
                    "properties": {
                        "id": {
                            "index": "not_analyzed",
                            "store": true,
                            "type": "string"
                        },
                        "name112222": {
                            "type": "string",
                            "store": true
                        }
                    }
                }
            }
        ]
    },
    {
        "notification": {
            "type": "MQ",
            "host": "tcp://172.19.65.38:61616?wireFormat=openwire",
            "topic": "topic.search_platform_test.update",
            "filter": {
                "union_operator": "and",
                "msg_type": "TextMessage",
                "conditions": [
                    {
                        "operator": "is",
                        "type": "regex",
                        "expression": "type=update"
                    }
                ]
            },
            "data_parser": {
                "type": "regex",
                "fields": {
                    "adminID": "adminID=(?P<adminID>[\\d\\D]+?);",
                    "id": "id=(?P<id>[\\d\\D]+?);",
                    "name": "name=(?P<name>[\\d\\D]+?);",
                    "brand": "brand=(?P<brand>[\\d\\D]+?);"
                }
            }
        },
        "source": {
            "type": "passthrough",
            "fields_reference": "fields"
        },
        "destination": [
            {
                "destination_type": "elasticsearch",
                "reference": "product",
                "operation": "create",
                "index": "search_platform-{adminID}-{version}",
                "id": "{id}"
            }
        ]
    }
]