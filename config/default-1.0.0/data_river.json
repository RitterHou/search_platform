{
  "rivers": [
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.qmpc.ItemChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "chainMasterId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "msg": {
            "custom_queue_prefix": "pc-"
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "yun_not_edit_add",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "(\"type\":\"add\"[\\d\\D]*\"sys\":[02])|(\"sys\":[02][\\d\\D]*\"type\":\"add\")|(\"type\":\"update\"[\\d\\D]*\"sys\":[02])|(\"sys\":[02][\\d\\D]*\"type\":\"update\")"
                },
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"edit\""
                },
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"addSkuIds\":\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "chainMasterId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"addSkuIds\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 50,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.pc.es.api.EsGoodsQueryProvider",
            "request": {
              "method": "listByIdString",
              "timeout": 30,
              "body": {
                "chainMasterId": "{adminId}",
                "idString": "{ids}"
              }
            }
          },
          "destination": [
            {
              "router": {
                "type": "vip_router",
                "fields": {
                  "adminId": "{adminId}",
                  "hashcode": {}
                },
                "target": [
                  {
                    "destination_type": "elasticsearch",
                    "reference": "product_vip",
                    "operation": "create",
                    "id": "{skuId}",
                    "tag": "vip"
                  },
                  {
                    "destination_type": "elasticsearch",
                    "reference": "product_experience",
                    "operation": "create",
                    "id": "{skuId}",
                    "tag": "default"
                  }
                ]
              }
            }
          ]
        },
        {
          "name": "yun_not_edit_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "(\"type\":\"add\"[\\d\\D]*\"sys\":[02])|(\"sys\":[02][\\d\\D]*\"type\":\"add\")|(\"type\":\"update\"[\\d\\D]*\"sys\":[02])|(\"sys\":[02][\\d\\D]*\"type\":\"update\")"
                },
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"edit\""
                },
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"updateSkuIds\":\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "chainMasterId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"updateSkuIds\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 50,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.pc.es.api.EsGoodsQueryProvider",
            "request": {
              "method": "listByIdString",
              "timeout": 30,
              "body": {
                "chainMasterId": "{adminId}",
                "idString": "{ids}"
              }
            }
          },
          "destination": [
            {
              "router": {
                "type": "vip_router",
                "fields": {
                  "adminId": "{adminId}",
                  "hashcode": {}
                },
                "target": [
                  {
                    "destination_type": "elasticsearch",
                    "reference": "product_vip",
                    "operation": "create",
                    "id": "{skuId}",
                    "tag": "vip"
                  },
                  {
                    "destination_type": "elasticsearch",
                    "reference": "product_experience",
                    "operation": "create",
                    "id": "{skuId}",
                    "tag": "default"
                  }
                ]
              }
            }
          ]
        },
        {
          "name": "yun_edit_add",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "(\"type\":\"add\"[\\d\\D]*\"sys\":[02])|(\"sys\":[02][\\d\\D]*\"type\":\"add\")|(\"type\":\"update\"[\\d\\D]*\"sys\":[02])|(\"sys\":[02][\\d\\D]*\"type\":\"update\")"
                },
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"edit\""
                },
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"addSkuIds\":\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "chainMasterId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"addSkuIds\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 50,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.pc.es.api.EsGoodsQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "listByIdString",
              "timeout": 30,
              "body": {
                "chainMasterId": "{adminId}",
                "idString": "{ids}"
              }
            }
          },
          "destination": [
            {
              "router": {
                "type": "vip_router",
                "fields": {
                  "adminId": "{adminId}"
                },
                "target": [
                  {
                    "destination_type": "elasticsearch",
                    "reference": "product_vip",
                    "operation": "create",
                    "id": "{skuId}",
                    "tag": "vip"
                  },
                  {
                    "destination_type": "elasticsearch",
                    "reference": "product_experience",
                    "operation": "create",
                    "id": "{skuId}",
                    "tag": "default"
                  }
                ]
              }
            }
          ]
        },
        {
          "name": "yun_edit_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "(\"type\":\"add\"[\\d\\D]*\"sys\":[02])|(\"sys\":[02][\\d\\D]*\"type\":\"add\")|(\"type\":\"update\"[\\d\\D]*\"sys\":[02])|(\"sys\":[02][\\d\\D]*\"type\":\"update\")"
                },
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"edit\""
                },
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"updateSkuIds\":\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "chainMasterId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"updateSkuIds\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 50,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.pc.es.api.EsGoodsQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "listByIdString",
              "timeout": 30,
              "body": {
                "chainMasterId": "{adminId}",
                "idString": "{ids}"
              }
            }
          },
          "destination": [
            {
              "router": {
                "type": "vip_router",
                "fields": {
                  "adminId": "{adminId}"
                },
                "target": [
                  {
                    "destination_type": "elasticsearch",
                    "reference": "product_vip",
                    "operation": "create",
                    "id": "{skuId}",
                    "tag": "vip"
                  },
                  {
                    "destination_type": "elasticsearch",
                    "reference": "product_experience",
                    "operation": "create",
                    "id": "{skuId}",
                    "tag": "default"
                  }
                ]
              }
            }
          ]
        },
        {
          "name": "yun_edit_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"deleteSkuIds\":\""
                },
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"sys\":[02]"
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "chainMasterId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"deleteSkuIds\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 50,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "router": {
                "type": "vip_router",
                "fields": {
                  "adminId": "{adminId}"
                },
                "target": [
                  {
                    "destination_type": "elasticsearch",
                    "reference": "product_vip",
                    "operation": "delete",
                    "id": "{ids}",
                    "id_process": {
                      "type": "seperate",
                      "separator": ":"
                    },
                    "tag": "vip"
                  },
                  {
                    "destination_type": "elasticsearch",
                    "reference": "product_experience",
                    "operation": "delete",
                    "id": "{ids}",
                    "id_process": {
                      "type": "seperate",
                      "separator": ":"
                    },
                    "tag": "default"
                  }
                ]
              }
            }
          ]
        },
        {
          "name": "spu_yun_not_edit",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "(\"type\":\"add\"[\\d\\D]*\"sys\":[02])|(\"sys\":[02][\\d\\D]*\"type\":\"add\")|(\"type\":\"update\"[\\d\\D]*\"sys\":[02])|(\"sys\":[02][\\d\\D]*\"type\":\"update\")"
                },
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"edit\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "chainMasterId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 50,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.pc.es.api.EsProductQueryProvider",
            "request": {
              "method": "listByIdString",
              "timeout": 30,
              "body": {
                "chainMasterId": "{adminId}",
                "idString": "{ids}"
              }
            }
          },
          "destination": [
            {
              "router": {
                "type": "vip_router",
                "fields": {
                  "adminId": "{adminId}"
                },
                "target": [
                  {
                    "destination_type": "elasticsearch",
                    "reference": "spu_vip",
                    "operation": "create",
                    "id": "{spuId}",
                    "tag": "vip"
                  },
                  {
                    "destination_type": "elasticsearch",
                    "reference": "spu_experience",
                    "operation": "create",
                    "id": "{spuId}",
                    "tag": "default"
                  }
                ]
              }
            }
          ]
        },
        {
          "name": "spu_yun_edit_add",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "(\"type\":\"add\"[\\d\\D]*\"sys\":[02])|(\"sys\":[02][\\d\\D]*\"type\":\"add\")|(\"type\":\"update\"[\\d\\D]*\"sys\":[02])|(\"sys\":[02][\\d\\D]*\"type\":\"update\")"
                },
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"edit\""
                },
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"addSkuIds\":\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "chainMasterId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"addSkuIds\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 50,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.pc.es.api.EsProductQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "listByIdString",
              "timeout": 30,
              "body": {
                "chainMasterId": "{adminId}",
                "idString": "{ids}"
              }
            }
          },
          "destination": [
            {
              "router": {
                "type": "vip_router",
                "fields": {
                  "adminId": "{adminId}"
                },
                "target": [
                  {
                    "destination_type": "elasticsearch",
                    "reference": "spu_vip",
                    "operation": "create",
                    "id": "{spuId}",
                    "tag": "vip"
                  },
                  {
                    "destination_type": "elasticsearch",
                    "reference": "spu_experience",
                    "operation": "create",
                    "id": "{spuId}",
                    "tag": "default"
                  }
                ]
              }
            }
          ]
        },
        {
          "name": "spu_yun_edit_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "(\"type\":\"add\"[\\d\\D]*\"sys\":[02])|(\"sys\":[02][\\d\\D]*\"type\":\"add\")|(\"type\":\"update\"[\\d\\D]*\"sys\":[02])|(\"sys\":[02][\\d\\D]*\"type\":\"update\")"
                },
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"edit\""
                },
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"updateSkuIds\":\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "chainMasterId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"updateSkuIds\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 50,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.pc.es.api.EsProductQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "listByIdString",
              "timeout": 30,
              "body": {
                "chainMasterId": "{adminId}",
                "idString": "{ids}"
              }
            }
          },
          "destination": [
            {
              "router": {
                "type": "vip_router",
                "fields": {
                  "adminId": "{adminId}"
                },
                "target": [
                  {
                    "destination_type": "elasticsearch",
                    "reference": "spu_vip",
                    "operation": "create",
                    "id": "{spuId}",
                    "tag": "vip"
                  },
                  {
                    "destination_type": "elasticsearch",
                    "reference": "spu_experience",
                    "operation": "create",
                    "id": "{spuId}",
                    "tag": "default"
                  }
                ]
              }
            }
          ]
        },
        {
          "name": "spu_yun_edit_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"delete\""
                },
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"sys\":[02]"
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "chainMasterId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": {
                  "type": "script",
                  "language": "python",
                  "obj_path": "script_data_parsers.parse_spuids_from_pc_mq_msg",
                  "input_param": {
                    "fields": {
                      "pc_ids": {
                        "type": "regex",
                        "expression": "\"ids\":\"(?P<pc_ids>[\\d\\D]+?)\""
                      },
                      "sep_char": {
                        "type": "fixed",
                        "expression": ","
                      }
                    }
                  }
                },
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 50,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "router": {
                "type": "vip_router",
                "fields": {
                  "adminId": "{adminId}"
                },
                "target": [
                  {
                    "destination_type": "elasticsearch",
                    "reference": "spu_vip",
                    "operation": "delete",
                    "id": "{ids}",
                    "id_process": {
                      "type": "seperate",
                      "separator": ","
                    },
                    "tag": "vip"
                  },
                  {
                    "destination_type": "elasticsearch",
                    "reference": "spu_experience",
                    "operation": "delete",
                    "id": "{ids}",
                    "id_process": {
                      "type": "seperate",
                      "separator": ","
                    },
                    "tag": "default"
                  }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "queue": "q.qmpc.EsInit",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "chainMasterId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "msg": {
            "custom_queue_prefix": "pc-"
          }
        }
      },
      "branches": [
        {
          "name": "yun_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"sys\":[02]"
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "chainMasterId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "fromSys": "sys\":(?P<fromSys>[\\d]+?)",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 50,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.pc.es.api.EsGoodsQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "query",
              "timeout": 30,
              "body": {
                "chainMasterId": "{adminId}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}",
                "fromSys": "{fromSys}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "router": {
                "type": "vip_router",
                "fields": {
                  "adminId": "{adminId}"
                },
                "target": [
                  {
                    "destination_type": "elasticsearch",
                    "reference": "product_vip",
                    "operation": "create",
                    "id": "{skuId}",
                    "clear_policy": "every_msg,by_adminId",
                    "tag": "vip"
                  },
                  {
                    "destination_type": "elasticsearch",
                    "reference": "product_experience",
                    "operation": "create",
                    "id": "{skuId}",
                    "clear_policy": "every_msg,by_adminId",
                    "tag": "default"
                  }
                ]
              }
            }
          ]
        },
        {
          "name": "spu_yun_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"sys\":[02]"
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "chainMasterId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "fromSys": "sys\":(?P<fromSys>[\\d]+?)",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 50,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.pc.es.api.EsProductQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "query",
              "timeout": 30,
              "body": {
                "chainMasterId": "{adminId}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}",
                "fromSys": "{fromSys}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "router": {
                "type": "vip_router",
                "fields": {
                  "adminId": "{adminId}"
                },
                "target": [
                  {
                    "destination_type": "elasticsearch",
                    "reference": "spu_vip",
                    "operation": "create",
                    "id": "{spuId}",
                    "clear_policy": "every_msg,by_adminId",
                    "tag": "vip"
                  },
                  {
                    "destination_type": "elasticsearch",
                    "reference": "spu_experience",
                    "operation": "create",
                    "id": "{spuId}",
                    "clear_policy": "every_msg,by_adminId",
                    "tag": "default"
                  }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.cloudshop.platform.initMarketing",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          }
        }
      },
      "branches": [
        {
          "name": "cloudshop_marketing_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": []
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "domain_type": "domainType\":\"(?P<domain_type>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.cloudshop.api.es.ESMarketingProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryMarketingList4ESearch",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}",
                "domainType": "{domain_type}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_experience",
              "operation": "create",
              "index": "cloudshop-marketing-{hashcode}-{version}",
              "id": "{marketingId}",
              "type": "Marketing",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.cloudshop.platform.marketingChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "cloudshop_marketing_add",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"add\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "domain_type": "domainType\":\"(?P<domain_type>[\\d\\D]+?)\"",
                "ids": "\"marketingId\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.cloudshop.api.es.ESMarketingProvider",
            "request": {
              "method": "queryMarketingList4ESearchByIds",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "domainType": "{domain_type}",
                "marketingId": "{ids}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_experience",
              "operation": "create",
              "index": "cloudshop-marketing-{hashcode}-{version}",
              "id": "{marketingId}",
              "type": "Marketing",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "cloudshop_marketing_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"update\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "domain_type": "domainType\":\"(?P<domain_type>[\\d\\D]+?)\"",
                "ids": "\"marketingId\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.cloudshop.api.es.ESMarketingProvider",
            "request": {
              "method": "queryMarketingList4ESearchByIds",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "domainType": "{domain_type}",
                "marketingId": "{ids}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_experience",
              "operation": "create",
              "index": "cloudshop-marketing-{hashcode}-{version}",
              "id": "{marketingId}",
              "type": "Marketing",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "cloudshop_marketing_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"marketingId\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_experience",
              "operation": "delete",
              "index": "cloudshop-marketing-{hashcode}-{version}",
              "type": "Marketing",
              "id": "{ids}",
              "id_process": {
                "type": "seperate",
                "separator": ","
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "queue": "q.search_platform.shopInit",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "chainMasterId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "msg": {
            "custom_queue_prefix": "pc-"
          }
        }
      },
      "branches": [
        {
          "name": "sp_vip_yun_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"sys\":[02]"
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "chainMasterId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "fromSys": "sys\":(?P<fromSys>[\\d]+?)",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 50,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.pc.es.api.EsGoodsQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "query",
              "timeout": 30,
              "body": {
                "chainMasterId": "{adminId}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}",
                "fromSys": "{fromSys}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "product_vip",
              "operation": "create",
              "id": "{skuId}",
              "clear_policy": "every_msg,by_adminId",
              "tag": "vip"
            }
          ]
        },
        {
          "name": "sp_vip_spu_yun_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"sys\":[02]"
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "chainMasterId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "fromSys": "sys\":(?P<fromSys>[\\d]+?)",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 50,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.pc.es.api.EsProductQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "query",
              "timeout": 30,
              "body": {
                "chainMasterId": "{adminId}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}",
                "fromSys": "{fromSys}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "spu_vip",
              "operation": "create",
              "id": "{spuId}",
              "clear_policy": "every_msg,by_adminId",
              "tag": "vip"
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.marketing.change",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "marketing_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.mc.api.search.SearchActivityQueryProvider",
            "request": {
              "method": "queryMarketingByIds",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "marketing-{hashcode}-{version}",
              "type": "Marketing",
              "id": "{id}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "marketing_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "marketing-{hashcode}-{version}",
              "type": "Marketing",
              "id": "{ids}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.marketing.itemChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "marketing_item_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.mc.api.search.SearchActivityQueryProvider",
            "request": {
              "method": "queryItemByIds",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "marketing-item-{hashcode}-{version}",
              "type": "Item",
              "id": "{id}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "marketing_item_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "marketing-item-{hashcode}-{version}",
              "type": "Item",
              "id": "{ids}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.marketing.tradeChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "marketing_trade_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.mc.api.search.SearchActivityQueryProvider",
            "request": {
              "method": "queryTradeMarketingRecordByIds",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "marketing-trade-{hashcode}-{version}",
              "type": "Trade",
              "id": "{tid}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "marketing_trade_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "marketing-trade-{hashcode}-{version}",
              "type": "Trade",
              "id": "{ids}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.marketing.userCouponChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "marketing_usercoupon_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.mc.api.search.SearchCouponQueryProvider",
            "request": {
              "method": "queryUserCouponByIds",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "marketing-usercoupon-{hashcode}-{version}",
              "type": "Coupon",
              "id": "{couponId}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "marketing_usercoupon_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "marketing-usercoupon-{hashcode}-{version}",
              "type": "Coupon",
              "id": "{ids}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.marketing.fansChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "marketing_fans_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.weixin.api.fans.SearchFansQueryProvider",
            "request": {
              "method": "queryFansByIds",
              "timeout": 30,
              "body": {
                "owner": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "marketing-fans-{hashcode}-{version}",
              "type": "Fans",
              "id": "{openId}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "marketing_fans_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "marketing-fans-{hashcode}-{version}",
              "type": "Fans",
              "id": "{ids}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.marketing.integralItem.change",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "marketing_integralItem_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.mc.api.search.SearchIntegralItemQueryProvider",
            "request": {
              "method": "queryIntegralItemByIds",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "marketing-integral-items-{hashcode}-{version}",
              "type": "Item",
              "id": "{id}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "marketing_integralItem_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "marketing-integral-items-{hashcode}-{version}",
              "type": "Item",
              "id": "{ids}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "queue": "q.searchPlatform.marketingInit",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          }
        }
      },
      "branches": [
        {
          "name": "marketing_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"marketing\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.mc.api.search.SearchActivityQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryMarketing",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "marketing-{hashcode}-{version}",
              "type": "Marketing",
              "id": "{id}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "marketing_item_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"item\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.mc.api.search.SearchActivityQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryItem",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "marketing-item-{hashcode}-{version}",
              "type": "Item",
              "id": "{id}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "marketing_trade_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"trade\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.mc.api.search.SearchActivityQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryTradeMarketingRecord",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "marketing-trade-{hashcode}-{version}",
              "type": "Trade",
              "id": "{tid}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "marketing_usercoupon_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"usercoupon\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.mc.api.search.SearchCouponQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryUserCoupon",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "marketing-usercoupon-{hashcode}-{version}",
              "type": "Coupon",
              "id": "{couponId}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "marketing_fans_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"fans\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.weixin.api.fans.SearchFansQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryFans",
              "timeout": 10,
              "body": {
                "owner": "{adminId}",
                "msgId": "{msgId}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "marketing-fans-{hashcode}-{version}",
              "type": "Fans",
              "id": "{openId}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "marketing_integralItem_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"integralitem\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.mc.api.search.SearchIntegralItemQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryIntegralItems",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "marketing-integral-items-{hashcode}-{version}",
              "type": "Item",
              "id": "{id}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.d2c.trade.change",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "d2c_trade_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.d2c.api.trade.search.TradeSearchQueryProvider",
            "request": {
              "method": "queryTradeByTid",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "d2c-trade-{hashcode}-{version}",
              "type": "Trade",
              "id": "{tid}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_trade_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "d2c-trade-{hashcode}-{version}",
              "type": "Trade",
              "id": "{ids}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.d2c.itemOrder.change",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "d2c_trade_item_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.d2c.api.trade.search.TradeSearchQueryProvider",
            "request": {
              "method": "queryItemOrderByOid",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "d2c-trade-item-{hashcode}-{version}",
              "type": "Item",
              "id": "{oid}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_trade_item_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "d2c-trade-item-{hashcode}-{version}",
              "type": "Item",
              "id": "{oid}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.d2c.trade.applyChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "d2c_trade_application_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.d2c.api.apply.search.Apply4SearchQueryProvider",
            "request": {
              "method": "queryApplyListByIds",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "d2c-trade-application-{hashcode}-{version}",
              "type": "Application",
              "id": "{applyId}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_trade_application_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "d2c-trade-application-{hashcode}-{version}",
              "type": "Application",
              "id": "{applyId}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.d2c.trade.refundReceiptChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "d2c_trade_refunded_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.d2c.api.receipt.search.Receipt4SearchQueryProvider",
            "request": {
              "method": "queryRefundReceiptListByIds",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "d2c-trade-refunded-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_trade_refunded_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "d2c-trade-refunded-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.d2c.trade.returnReceiptChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "d2c_trade_returned_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.d2c.api.receipt.search.Receipt4SearchQueryProvider",
            "request": {
              "method": "queryReturnReceiptListByIds",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "d2c-trade-returned-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_trade_returned_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "d2c-trade-returned-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.d2c.trade.shipReceiptChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "d2c_trade_ship_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.d2c.api.receipt.search.Receipt4SearchQueryProvider",
            "request": {
              "method": "queryShipReceiptListByIds",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "d2c-trade-ship-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_trade_ship_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "d2c-trade-ship-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.d2c.trade.receiveReceiptChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "d2c_trade_receive_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.d2c.api.receipt.search.Receipt4SearchQueryProvider",
            "request": {
              "method": "queryReceiveReceiptListByIds",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "d2c-trade-receive-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_trade_receive_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "d2c-trade-receive-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "queue": "q.searchPlatform.d2c.tradeInit",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          }
        }
      },
      "branches": [
        {
          "name": "d2c_trade_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"trade\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.d2c.api.trade.search.TradeSearchQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryTradePage",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "d2c-trade-{hashcode}-{version}",
              "type": "Trade",
              "id": "{tid}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_trade_item_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"item_order\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.d2c.api.trade.search.TradeSearchQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryItemOrderPage",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "d2c-trade-item-{hashcode}-{version}",
              "type": "Item",
              "id": "{oid}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_trade_application_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"apply\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.d2c.api.apply.search.Apply4SearchQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryApplyPage",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "d2c-trade-application-{hashcode}-{version}",
              "type": "Application",
              "id": "{applyId}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_trade_refunded_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"refund_receipt\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.d2c.api.receipt.search.Receipt4SearchQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryRefundReceiptPage",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "d2c-trade-refunded-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_trade_returned_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"return_receipt\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.d2c.api.receipt.search.Receipt4SearchQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryReturnReceiptPage",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "d2c-trade-returned-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_trade_receive_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"receive_receipt\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.d2c.api.receipt.search.Receipt4SearchQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryReceiveReceiptPage",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "d2c-trade-receive-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_trade_ship_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"ship_receipt\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.d2c.api.receipt.search.Receipt4SearchQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryShipReceiptPage",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "d2c-trade-ship-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.d2c.cash.trade.change",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "d2c_cash_trade_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.d2c.tc.cash.api.trade.search.CashierTradeSearchQueryProvider",
            "request": {
              "method": "queryTradeByTids",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "d2c-cash-trade-{hashcode}-{version}",
              "type": "Trade",
              "id": "{tid}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_trade_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "d2c-cash-trade-{hashcode}-{version}",
              "type": "Trade",
              "id": "{tid}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.d2c.cash.itemOrder.change",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "d2c_cash_trade_item_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.d2c.tc.cash.api.trade.search.CashierTradeSearchQueryProvider",
            "request": {
              "method": "queryItemOrderByOids",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "d2c-cash-trade-item-{hashcode}-{version}",
              "type": "Item",
              "id": "{oid}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_cash_trade_item_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "d2c-cash-trade-item-{hashcode}-{version}",
              "type": "Item",
              "id": "{oid}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.d2c.cash.returnReceipt.change",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "d2c_cash_trade_returnReceipt_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.d2c.tc.cash.api.trade.search.CashierTradeSearchQueryProvider",
            "request": {
              "method": "queryReturnReceiptListByIds",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "d2c-cash-trade-returned-{hashcode}-{version}",
              "type": "Item",
              "id": "{retTid}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_cash_trade_returnReceipt_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "d2c-cash-trade-returned-{hashcode}-{version}",
              "type": "Item",
              "id": "{retTid}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.d2c.cash.refundReceipt.change",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "d2c_cash_trade_refundReceipt_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.d2c.tc.cash.api.trade.search.CashierTradeSearchQueryProvider",
            "request": {
              "method": "queryRefundReceiptListByIds",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "d2c-cash-trade-refunded-{hashcode}-{version}",
              "type": "Item",
              "id": "{receiptId}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_cash_trade_refundReceipt_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "d2c-cash-trade-refunded-{hashcode}-{version}",
              "type": "Item",
              "id": "{receiptId}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "queue": "q.searchPlatform.d2c.cash.tradeInit",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          }
        }
      },
      "branches": [
        {
          "name": "d2c_trade_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"trade\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.d2c.tc.cash.api.trade.search.CashierTradeSearchQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryTradePage",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "d2c-cash-trade-{hashcode}-{version}",
              "type": "Trade",
              "id": "{tid}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_trade_item_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"item_order\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.d2c.tc.cash.api.trade.search.CashierTradeSearchQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryItemOrderPage",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "d2c-cash-trade-item-{hashcode}-{version}",
              "type": "Item",
              "id": "{oid}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_cash_trade_return_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"return_receipt\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.d2c.tc.cash.api.trade.search.CashierTradeSearchQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryReturnReceiptPage",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "d2c-cash-trade-returned-{hashcode}-{version}",
              "type": "Item",
              "id": "{retTid}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_cash_trade_refundReceipt_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"refund_receipt\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.d2c.tc.cash.api.trade.search.CashierTradeSearchQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryRefundReceiptPage",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "d2c-cash-trade-refunded-{hashcode}-{version}",
              "type": "Item",
              "id": "{receiptId}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.d2p.order.change",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "d2p_trade_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.d2p.order.api.TradeQueryProvider",
            "request": {
              "method": "findByIds",
              "timeout": 30,
              "body": {
                "ids": "{ids}",
                "msgId": "{msgId}",
                "adminId": "{adminId}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "d2p-trade-{hashcode}-{version}",
              "type": "Trade",
              "id": "{id}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2p_trade_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "d2p-trade-{hashcode}-{version}",
              "type": "Trade",
              "id": "{id}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "queue": "q.searchPlatform.d2p.returnInit",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          }
        }
      },
      "branches": [
        {
          "name": "d2p_trade_return_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": []
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.d2p.returnorder.api.ReturnOrderQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "findByAdminId",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}",
                "msgId": "{msgId}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "d2p-trade-returned-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{id}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.d2p.order.return.change",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "d2p_trade_return_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.d2p.returnorder.api.ReturnOrderQueryProvider",
            "request": {
              "method": "findByIds",
              "timeout": 30,
              "body": {
                "msgId": "{msgId}",
                "adminId": "{adminId}",
                "ids": "{ids}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "d2p-trade-returned-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{id}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2p_trade_return_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "d2p-trade-returned-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{id}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "queue": "q.searchPlatform.d2p.tradeInit",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          }
        }
      },
      "branches": [
        {
          "name": "d2p_trade_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": []
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.d2p.order.api.TradeQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "findByAdminId",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "d2p-trade-{hashcode}-{version}",
              "type": "Trade",
              "id": "{id}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.consignment.trade.change",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "consignment_trade_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.consignment.api.trade.search.TradeSearchQueryProvider",
            "request": {
              "method": "queryTradeByTid",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "consignment-trade-{hashcode}-{version}",
              "type": "Trade",
              "id": "{tid}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "consignment_trade_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "consignment-trade-{hashcode}-{version}",
              "type": "Trade",
              "id": "{tid}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.consignment.itemOrder.change",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "consignment_trade_item_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.consignment.api.trade.search.TradeSearchQueryProvider",
            "request": {
              "method": "queryItemOrderByOid",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "consignment-trade-item-{hashcode}-{version}",
              "type": "Item",
              "id": "{oid}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "consignment_trade_item_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "consignment-trade-item-{hashcode}-{version}",
              "type": "Item",
              "id": "{oid}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.consignment.trade.applyChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "consignment_trade_application_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.consignment.api.apply.search.Apply4SearchQueryProvider",
            "request": {
              "method": "queryApplyListByIds",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "consignment-trade-application-{hashcode}-{version}",
              "type": "Application",
              "id": "{applyId}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "consignment_trade_application_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "consignment-trade-application-{hashcode}-{version}",
              "type": "Application",
              "id": "{applyId}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.consignment.trade.refundReceiptChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "consignment_trade_refunded_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.consignment.api.receipt.search.Receipt4SearchQueryProvider",
            "request": {
              "method": "queryRefundReceiptListByIds",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "consignment-trade-refunded-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "consignment_trade_refunded_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "consignment-trade-refunded-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.consignment.trade.returnReceiptChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "consignment_trade_returned_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.consignment.api.receipt.search.Receipt4SearchQueryProvider",
            "request": {
              "method": "queryReturnReceiptListByIds",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "consignment-trade-returned-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "consignment_trade_returned_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "consignment-trade-returned-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.consignment.trade.shipReceiptChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "consignment_trade_ship_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.consignment.api.receipt.search.Receipt4SearchQueryProvider",
            "request": {
              "method": "queryShipReceiptListByIds",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "consignment-trade-ship-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "consignment_trade_ship_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "consignment-trade-ship-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.consignment.trade.receiveReceiptChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          },
          "redo": true
        }
      },
      "branches": [
        {
          "name": "consignment_trade_receive_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.consignment.api.receipt.search.Receipt4SearchQueryProvider",
            "request": {
              "method": "queryReceiveReceiptListByIds",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "ids": "{ids}",
                "msgId": "{msgId}",
                "domainType": "{domainType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "consignment-trade-receive-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "consignment_trade_receive_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "ids": "\"ids\":\"(?P<ids>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "consignment-trade-receive-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              },
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "queue": "q.searchPlatform.consignment.tradeInit",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          }
        }
      },
      "branches": [
        {
          "name": "consignment_trade_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"trade\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.consignment.api.trade.search.TradeSearchQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryTradePage",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "consignment-trade-{hashcode}-{version}",
              "type": "Trade",
              "id": "{tid}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "consignment_trade_item_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"item_order\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.consignment.api.trade.search.TradeSearchQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryItemOrderPage",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "consignment-trade-item-{hashcode}-{version}",
              "type": "Item",
              "id": "{oid}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "consignment_trade_application_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"apply\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.consignment.api.apply.search.Apply4SearchQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryApplyPage",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "consignment-trade-application-{hashcode}-{version}",
              "type": "Application",
              "id": "{applyId}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "consignment_trade_refunded_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"refund_receipt\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.consignment.api.receipt.search.Receipt4SearchQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryRefundReceiptPage",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "consignment-trade-refunded-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "consignment_trade_returned_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"return_receipt\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.consignment.api.receipt.search.Receipt4SearchQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryReturnReceiptPage",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "consignment-trade-returned-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "consignment_trade_receive_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"receive_receipt\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.consignment.api.receipt.search.Receipt4SearchQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryReceiveReceiptPage",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "consignment-trade-receive-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "consignment_trade_ship_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"type\":\"ship_receipt\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.consignment.api.receipt.search.Receipt4SearchQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryShipReceiptPage",
              "timeout": 10,
              "body": {
                "adminId": "{adminId}",
                "msgId": "{msgId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "create",
              "index": "consignment-trade-ship-{hashcode}-{version}",
              "type": "Receipt",
              "id": "{receiptId}",
              "clear_policy": "every_msg,by_adminId",
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.usercenter.es.ticketChange",
        "sla": {
          "data_parser": {
            "type": "fixed",
            "fields": {
              "adminId": "uc"
            }
          }
        }
      },
      "branches": [
        {
          "name": "usercenter_ticket_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operatorType\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "ticketId": "ticketId\":\"(?P<ticketId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.uc.query.api.ticket.search.QueryTicket4SearchProvider",
            "request": {
              "method": "getTicketById4Search",
              "timeout": 30,
              "body": {
                "msgId": "{msgId}",
                "ticketId": "{ticketId}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "qm-user-{version}",
              "type": "User",
              "id": "{ticketId}"
            }
          ]
        },
        {
          "name": "usercenter_ticket_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operatorType\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "ticketId": "ticketId\":\"(?P<ticketId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "qm-user-{version}",
              "type": "User",
              "id": "{ticketId}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              }
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.usercenter.es.storeChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          }
        }
      },
      "branches": [
        {
          "name": "usercenter_shop_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operatorType\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.uc.query.api.store.search.QueryStore4SearchProvider",
            "request": {
              "method": "getStoreById4Search",
              "timeout": 30,
              "body": {
                "msgId": "{msgId}",
                "adminId": "{adminId}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "qm-usershop-{version}",
              "type": "Shop",
              "id": "{adminId}"
            }
          ]
        },
        {
          "name": "usercenter_shop_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operatorType\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "qm-usershop-{version}",
              "type": "Shop",
              "id": "{adminId}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              }
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.usercenter.ticketInit",
        "sla": {
          "data_parser": {
            "type": "fixed",
            "fields": {
              "adminId": "uc"
            }
          }
        }
      },
      "branches": [
        {
          "name": "usercenter_ticket_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": []
            },
            "data_parser": {
              "type": "regex",
              "fields": {}
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.uc.query.api.ticket.search.QueryTicket4SearchProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryAllTickets4Search",
              "timeout": 30,
              "body": {
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "qm-user-{version}",
              "type": "User",
              "id": "{ticketId}"
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.usercenter.shopInit",
        "sla": {
          "data_parser": {
            "type": "fixed",
            "fields": {
              "adminId": "uc"
            }
          }
        }
      },
      "branches": [
        {
          "name": "usercenter_shop_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": []
            },
            "data_parser": {
              "type": "regex",
              "fields": {}
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.uc.query.api.store.search.QueryStore4SearchProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryAllStores4Search",
              "timeout": 30,
              "body": {
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "qm-usershop-{version}",
              "type": "Shop",
              "id": "{adminId}"
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.oms.searchPlatform.deliveryNote.change",
        "sla": {
          "data_parser": {
            "type": "fixed",
            "fields": {
              "adminId": "oms"
            }
          }
        }
      },
      "branches": [
        {
          "name": "oms_delivery_note_change",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "chainMaster\":\"(?P<adminId>[\\d\\D]+?)\"",
                "deliveryNos": "deliveryNos\":\"(?P<deliveryNos>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.oms.api.delivery.DeliveryNoteViewProvider",
            "request": {
              "method": "findByDeliveryNos",
              "timeout": 30,
              "body": {
                "chainMaster": "{adminId}",
                "deliveryNos": "{deliveryNos}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "qm-oms-{hashcode}-{version}",
              "type": "DeliveryNote",
              "id": "{deliveryNo}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "oms_delivery_note_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "chainMaster\":\"(?P<adminId>[\\d\\D]+?)\"",
                "deliveryNos": "deliveryNos\":\"(?P<deliveryNos>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "qm-oms-{hashcode}-{version}",
              "type": "DeliveryNote",
              "id": "{deliveryNos}",
              "id_process": {
                "type": "seperate",
                "separator": ","
              }
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.oms.searchPlatform.deliveryNote.init",
        "sla": {
          "data_parser": {
            "type": "fixed",
            "fields": {
              "adminId": "oms"
            }
          }
        }
      },
      "branches": [
        {
          "name": "oms_delivery_note_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"init\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "chainMaster\":\"(?P<adminId>[\\d\\D]+?)\"",
                "hashcode": {
                  "type": "hash_modulus",
                  "modulus": 1,
                  "origin_filed": "adminId"
                }
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.oms.api.delivery.DeliveryNoteViewProvider",
            "version": "1.0.0",
            "request": {
              "method": "findByChainMaster",
              "timeout": 30,
              "body": {
                "chainMaster": "{adminId}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "qm-oms-{hashcode}-{version}",
              "type": "DeliveryNote",
              "id": "{deliveryNo}",
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.usercenter.visitPlanChange",
        "sla": {
          "data_parser": {
            "type": "fixed",
            "fields": {
              "adminId": "uc_visit_plan"
            }
          }
        }
      },
      "branches": [
        {
          "name": "uc_visit_plan_change",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operatorType\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "planId": "planId\":\"(?P<planId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.uc.vrecord.api.plan.search.VisitPlanQuery4SearchProvider",
            "request": {
              "method": "getById4Search",
              "timeout": 30,
              "body": {
                "planId": "{planId}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "qm-uc-{version}",
              "type": "Plan",
              "id": "{planId}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "uc_visit_plan_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operatorType\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "fields": {
                  "planId": "planId\":\"(?P<planId>[\\d\\D]+?)\""
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "qm-uc-{version}",
              "type": "Plan",
              "id": "{planId}",
              "id_process": {
                "type": "seperate",
                "separator": ","
              }
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.usercenter.visitRecordChange",
        "sla": {
          "data_parser": {
            "type": "fixed",
            "fields": {
              "adminId": "uc_visit_record"
            }
          }
        }
      },
      "branches": [
        {
          "name": "uc_visit_record_change",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operatorType\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "recordId": "recordId\":\"(?P<recordId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.uc.vrecord.api.record.search.VisitRecordQuery4SearchProvider",
            "request": {
              "method": "getById4Search",
              "timeout": 30,
              "body": {
                "recordId": "{recordId}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "qm-uc-{version}",
              "type": "Record",
              "id": "{recordId}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "uc_visit_record_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operatorType\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "fields": {
                  "recordId": "recordId\":\"(?P<recordId>[\\d\\D]+?)\""
                }
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "qm-uc-{version}",
              "type": "Record",
              "id": "{recordId}",
              "id_process": {
                "type": "seperate",
                "separator": ","
              }
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.usercenter.visitPlanInit",
        "sla": {
          "data_parser": {
            "type": "fixed",
            "fields": {
              "adminId": "uc_visit_plan"
            }
          }
        }
      },
      "branches": [
        {
          "name": "uc_visit_plan_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "."
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.uc.vrecord.api.plan.search.VisitPlanQuery4SearchProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryAllVisitPlan4Search",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "qm-uc-{version}",
              "type": "Plan",
              "id": "{planId}",
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.usercenter.visitRecordInit",
        "sla": {
          "data_parser": {
            "type": "fixed",
            "fields": {
              "adminId": "uc_visit_record"
            }
          }
        }
      },
      "branches": [
        {
          "name": "uc_visit_record_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "."
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.uc.vrecord.api.record.search.VisitRecordQuery4SearchProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryAllVisitRecord4Search",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "qm-uc-{version}",
              "type": "Record",
              "id": "{recordId}",
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.usercenter.es.employeeChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          }
        }
      },
      "branches": [
        {
          "name": "uc_employee_change",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operatorType\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\"",
                "employeeId": "employeeId\":\"(?P<employeeId>[\\d\\D]+?)\"",
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.uc.query.api.employee.search.QueryEmployee4SearchProvider",
            "request": {
              "method": "listEmployeeById",
              "timeout": 30,
              "body": {
                "msgId": "{msgId}",
                "employeeId": "{employeeId}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "qm-uc-employee-{version}",
              "type": "Employee",
              "id": "{employeeId}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "uc_employee_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operatorType\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "employeeId": "employeeId\":\"(?P<employeeId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "operation": "delete",
              "index": "qm-uc-employee-{version}",
              "type": "Employee",
              "id": "{employeeId}",
              "id_process": {
                "type": "seperate",
                "separator": ","
              }
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.usercenter.syncEmployee",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "shopId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          }
        }
      },
      "branches": [
        {
          "name": "uc_employee_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "."
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "shopId\":\"(?P<adminId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.uc.query.api.employee.search.QueryEmployee4SearchProvider",
            "version": "1.0.0",
            "request": {
              "method": "listEmployeeByAdminId",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "qm-uc-employee-{version}",
              "type": "Employee",
              "id": "{employeeId}",
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.qmselforder.search.partner_customer",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          }
        }
      },
      "branches": [
        {
          "name": "uc_partner_customer_change",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operatorType\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "customerId": "customerId\":\"(?P<customerId>[\\d\\D]+?)\"",
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0",
            "service_interface": "com.qianmi.self.order.query.PartnerEsQueryProvider",
            "request": {
              "method": "customerById",
              "timeout": 30,
              "body": {
                "customerId": "{customerId}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_experience",
              "index": "qm-uc-partner-customer-{version}",
              "type": "PartnerCustomer",
              "id": "{customerQmId}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "uc_partner_customer_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operatorType\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "customerId": "customerId\":\"(?P<customerId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_experience",
              "operation": "delete",
              "index": "qm-uc-partner-customer-{version}",
              "type": "PartnerCustomer",
              "id": "{customerId}",
              "id_process": {
                "type": "seperate",
                "separator": ","
              }
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "queue": "q.qmselforder.search.partner_customer_page",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          }
        }
      },
      "branches": [
        {
          "name": "uc_partner_customer_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "."
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.self.order.query.PartnerEsQueryProvider",
            "version": "1.0",
            "request": {
              "method": "customerByPage",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_experience",
              "index": "qm-uc-partner-customer-{version}",
              "type": "PartnerCustomer",
              "id": "{customerQmId}",
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "queue": "q.searchPlatform.d2c.cart.cartInit",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          }
        }
      },
      "branches": [
        {
          "name": "d2c_cart_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "."
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.d2c.cart.api.buyer.BuyerCartQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryPage4Search",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}",
                "msgId": "{msgId}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_experience",
              "index": "qm-d2c-cart-{version}",
              "type": "Cart",
              "id": "{userId}",
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "queue": "q.searchPlatform.d2c.cart.footprintInit",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          }
        }
      },
      "branches": [
        {
          "name": "d2c_cart_footprint_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "."
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.d2c.cart.api.buyer.BuyerFootprintQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryPage4Search",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}",
                "msgId": "{msgId}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_experience",
              "index": "qm-d2c-cart-footprint-{version}",
              "type": "CartFootprint",
              "id": "{userId}",
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "queue": "q.searchPlatform.d2c.cart.favouriteInit",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          }
        }
      },
      "branches": [
        {
          "name": "d2c_cart_favourite_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "."
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.d2c.cart.api.buyer.BuyerFavouriteQueryProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryPage4Search",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "domainType": "{domainType}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}",
                "msgId": "{msgId}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_experience",
              "index": "qm-d2c-cart-favourite-{version}",
              "type": "CartFavourite",
              "id": "{userId}",
              "add_admin_id_field": true
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.d2c.cart.cartChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          }
        }
      },
      "branches": [
        {
          "name": "d2c_card_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"update\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "userId": "userId\":\"(?P<userId>[\\d\\D]+?)\"",
                "levelId": "levelId\":\"(?P<levelId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.d2c.cart.api.buyer.BuyerCartQueryProvider",
            "request": {
              "method": "query4Search",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "domainType": "{domainType}",
                "userId": "{userId}",
                "levelId": "{levelId}",
                "msgId": "{msgId}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_experience",
              "index": "qm-d2c-cart-{version}",
              "type": "Cart",
              "id": "{userId}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_card_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "userId": "userId\":\"(?P<userId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_experience",
              "operation": "delete",
              "index": "qm-d2c-cart-{version}",
              "type": "Cart",
              "id": "{userId}",
              "id_process": {
                "type": "seperate",
                "separator": ","
              }
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.d2c.cart.footprintChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          }
        }
      },
      "branches": [
        {
          "name": "d2c_card_footprint_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"update\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "userId": "userId\":\"(?P<userId>[\\d\\D]+?)\"",
                "levelId": "levelId\":\"(?P<levelId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.d2c.cart.api.buyer.BuyerFootprintQueryProvider",
            "request": {
              "method": "query4Search",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "domainType": "{domainType}",
                "userId": "{userId}",
                "levelId": "{levelId}",
                "msgId": "{msgId}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_experience",
              "index": "qm-d2c-cart-footprint-{version}",
              "type": "CartFootprint",
              "id": "{userId}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_card_footprint_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "userId": "userId\":\"(?P<userId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_experience",
              "operation": "delete",
              "index": "qm-d2c-cart-footprint-{version}",
              "type": "CartFootprint",
              "id": "{userId}",
              "id_process": {
                "type": "seperate",
                "separator": ","
              }
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.d2c.cart.favouriteChange",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          }
        }
      },
      "branches": [
        {
          "name": "d2c_card_favourite_update",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"update\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "adminId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "domainType": "domainType\":\"(?P<domainType>[\\d\\D]+?)\"",
                "userId": "userId\":\"(?P<userId>[\\d\\D]+?)\"",
                "levelId": "levelId\":\"(?P<levelId>[\\d\\D]+?)\"",
                "msgId": "msgId\":\"(?P<msgId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.d2c.cart.api.buyer.BuyerFavouriteQueryProvider",
            "request": {
              "method": "query4Search",
              "timeout": 30,
              "body": {
                "adminId": "{adminId}",
                "domainType": "{domainType}",
                "userId": "{userId}",
                "levelId": "{levelId}",
                "msgId": "{msgId}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_experience",
              "index": "qm-d2c-cart-favourite-{version}",
              "type": "CartFavourite",
              "id": "{userId}",
              "add_admin_id_field": true
            }
          ]
        },
        {
          "name": "d2c_card_favourite_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "userId": "userId\":\"(?P<userId>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_experience",
              "operation": "delete",
              "index": "qm-d2c-cart-favourite-{version}",
              "type": "CartFavourite",
              "id": "{userId}",
              "id_process": {
                "type": "seperate",
                "separator": ","
              }
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "queue": "q.uc.retail.init",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "storeId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          }
        }
      },
      "branches": [
        {
          "name": "b2c_uc_retail_init",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "."
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "storeId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "mqId": "mqId\":\"(?P<mqId>[\\d\\D]+?)\"",
                "storeId": "storeId\":\"(?P<storeId>[\\d\\D]+?)\"",
                "storeType": "storeType\":\"(?P<storeType>[\\d\\D]+?)\"",
                "uuid": "uuid\":\"(?P<uuid>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "iterator_get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "service_interface": "com.qianmi.uc.connection.api.view.search.ConnectionSearchProvider",
            "version": "1.0.0",
            "request": {
              "method": "queryB2cByPage",
              "timeout": 30,
              "body": {
                "clientIp": "127.0.0.1",
                "clientType": "SEARCH_PLATFORM",
                "mqId": "{mqId}",
                "storeId": "{storeId}",
                "storeType": "{storeType}",
                "uuid": "{uuid}",
                "pageNum": "{page_from}",
                "pageSize": "{page_size}"
              }
            },
            "response": {
              "fields": {
                "total": "totalCount",
                "data": "dataList"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "b2c-retail-view-{version}",
              "type": "B2CRetailView",
              "add_admin_id_field": true,
              "id": "{cid}"
            }
          ]
        }
      ]
    },
    {
      "notification": {
        "type": "MQ",
        "host": "{mq_host}",
        "topic": "t.uc.retail.change",
        "sla": {
          "data_parser": {
            "type": "regex",
            "fields": {
              "adminId": "storeId\":\"(?P<adminId>[\\d\\D]+?)\""
            }
          }
        }
      },
      "branches": [
        {
          "name": "b2c_retail_view_change",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "not",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "adminId": "storeId\":\"(?P<adminId>[\\d\\D]+?)\"",
                "mqId": "mqId\":\"(?P<mqId>[\\d\\D]+?)\"",
                "storeId": "storeId\":\"(?P<storeId>[\\d\\D]+?)\"",
                "storeType": "storeType\":\"(?P<storeType>[\\d\\D]+?)\"",
                "cids": "cids\":\"(?P<cids>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "get",
            "protocol": "dubbo",
            "host": "{zookeeper_host}",
            "version": "1.0.0",
            "service_interface": "com.qianmi.uc.connection.api.view.search.ConnectionSearchProvider",
            "request": {
              "method": "queryB2cByCids",
              "timeout": 30,
              "body": {
                "clientIp": "127.0.0.1",
                "clientType": "SEARCH_PLATFORM",
                "ids": "{cids}",
                "mqId": "{mqId}",
                "storeId": "{storeId}",
                "storeType": "{storeType}"
              }
            }
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "b2c-retail-view-{version}",
              "type": "B2CRetailView",
              "add_admin_id_field": true,
              "id": "{cid}"
            }
          ]
        },
        {
          "name": "b2c_retail_view_delete",
          "notification": {
            "filter": {
              "union_operator": "and",
              "msg_type": "TextMessage",
              "conditions": [
                {
                  "operator": "is",
                  "type": "regex",
                  "expression": "\"operation\":\"delete\""
                }
              ]
            },
            "data_parser": {
              "type": "regex",
              "fields": {
                "cids": "cids\":\"(?P<cids>[\\d\\D]+?)\""
              }
            }
          },
          "source": {
            "type": "passthrough",
            "fields_reference": "fields"
          },
          "destination": [
            {
              "destination_type": "elasticsearch",
              "reference": "general_vip",
              "index": "b2c-retail-view-{version}",
              "type": "B2CRetailView",
              "operation": "delete",
              "id": "{cids}",
              "id_process": {
                "type": "seperate",
                "separator": ";"
              }
            }
          ]
        }
      ]
    }
  ]
}